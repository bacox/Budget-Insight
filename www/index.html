<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <style>
        body {
            /*text-align: center;*/
            font: 1em roboto, sans-serif;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js" integrity="sha256-VeNaFBVDhoX3H+gJ37DpT/nTuZTdjYro9yBruHjVmoQ=" crossorigin="anonymous"></script>
</head>
<body>
<!-- Titla of the page -->
<div>Home</div>

<!-- Menu -->
<div>
    <div>Menu</div>
    <div><a href="index.html">Home</a></div>
    <div><a href="all-transactions.html">All transactions</a></div>
    <div><a href="by-id.html">Get transaction by id</a></div>
</div>
<!-- Get a specific transaction-->
<div>Get transaction</div>
<div>
    <div>
        Enter a transaction id to retreive it:
    </div>
    <div>
        <input id="id-input" type="text"/><button id="action">Send</button>
    </div>
</div>
<div>
<!--    <div>Transaction:</div>-->
    <div>
        <table>
            <caption>Transaction</caption>
            <thead>
            <tr>
                <th>Name</th>
                <th>Value
            </tr>

            </thead>
            <tbody id="t-transaction-row">

        </table>
    </div>
</div>
<div id="results"></div>

<div>Get all transactions</div>
<div></div>



<script>

    function displayTransaction(data){
        $("#t-transaction-row").empty();
        $("#t-transaction-row")
            .after('<tr></tr><td>ID</td><td>'+ data.id+'</td></tr>')
            .after('<tr></tr><td>date</td><td>'+ data.date+'</td></tr>')
            .after('<tr></tr><td>iban</td><td>'+ data.iban+'</td></tr>')
            .after('<tr></tr><td>mutation amount</td><td>'+ data.mutationAmount+'</td></tr>')
            .after('<tr></tr><td>valuta</td><td>'+ data.valuta+'</td></tr>')
            .after('<tr></tr><td>balance</td><td>'+ data.balanceBefore+'</td></tr>')
            // .after('<td>ID</td><td>'+ data.id+'</td>');
    }
    $('#action').click(function(event) {
        event.preventDefault();

        $.ajax("api-v2/getById?id=" + $('#id-input').val(), {
            success: function(data) {
                console.log('Got a positive response');
                console.log(data);
                displayTransaction(data.data);
            },
            error: function() {
                console.log('An error occurred');
            }
        });
    });

    $.ajax("api-v2/getAll", {
        success: function(data) {
            // $('#main').html($(data).find('#main *'));
            console.log('Got a positive response');
            console.log(data.data);
            console.log(data.data[0].id);
        },
        error: function() {
            console.log('An error occurred');
        }
    });
</script>
</body>
</html>